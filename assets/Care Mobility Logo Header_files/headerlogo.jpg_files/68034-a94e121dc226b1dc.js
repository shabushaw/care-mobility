try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="74c14a7e-b6fe-4d3f-8779-338accaa0034",e._sentryDebugIdIdentifier="sentry-dbid-74c14a7e-b6fe-4d3f-8779-338accaa0034")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:anthropic-apps":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[68034],{0xeaff4de:(e,s,a)=>{a.d(s,{Rk:()=>N,XI:()=>T,Yo:()=>k,ug:()=>C});var t=a(0x22102fd88),l=a(0x23e1b1f63),n=a(0xfab48d52),i=a(0x7ee609c5),d=a(0xfa857e79),u=a(0x1a7194edb),r=a(0x21dcf50a5),o=a(0x14206585f),c=a(0xf32c56dd),g=a(0x14de19ae8),m=a(0x21870d616),x=a(0x225bae024),f=a(0x183548b63),p=a(0xac309a83),h=a(0x141440998),b=a(0x78b33fbd),_=a(0xef41e510),j=a.n(_),M=a(0xfc89b4a4),v=a(0x1ab0d1ca1),y=a(0x38e6572),w=a(0xac06e3dc);let k="overages-upgrade-upsell-modal-opened",C=6048e5,A=null;function T(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null==A||A(!0,e,s)}function N(){var e;let s=(0,g.Sk)(),a=(0,p.fS)("overage_billing_mobile_support"),[i,c]=(0,M.useState)(void 0),[m,x]=(0,M.useState)(!1),[f,h]=(0,M.useState)(!1),[b,_]=(0,M.useState)(!1),[j,v]=(0,M.useState)(!1),[y,w]=(0,M.useState)(!1),[k,C]=(0,M.useState)(!1),{data:T}=(0,n.WF)(),{data:N}=(0,n.Wm)(),{data:S,isLoading:Y}=(0,l.nc)(),U=!!S,D=(null==N?void 0:N.isEnabled)||!1,P="number"==typeof(null==N?void 0:N.monthlyLimit)&&(null==N?void 0:N.monthlyLimit)>0;(0,M.useEffect)(()=>(A=(e,s,a)=>{h(e),c(s),x(null!=a&&a)},()=>{A=null}),[]);let{isEnabling:z,onEnableOveragesConfirm:I}=(0,u.z)({onEnabled:e=>{v(!1),e||C(!0)}}),L=(0,M.useCallback)(()=>{h(!1),c(void 0),x(!1)},[]),O=(0,M.useCallback)(()=>{D?w(!0):P?I():a&&s&&!U?_(!0):v(!0),L()},[D,P,s,U,a,I,L]),E=(0,M.useCallback)(()=>{_(!1)},[]),F=(0,M.useCallback)(()=>{_(!1),v(!0)},[]),Z=(0,M.useCallback)(()=>{v(!1),h(!0)},[]),B=(0,M.useCallback)(e=>{C(!1),e&&L()},[L]),G=(0,M.useCallback)(()=>{w(!1),L()},[L]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(q,{isOpen:f&&(!s||!Y),overagesEnabled:D,messageLimit:i,isWarning:m,onOveragesClick:O,onClose:L}),(0,t.jsx)(r.d,{isOpen:b,onClose:E,onComplete:F}),(0,t.jsx)(u.n,{isOpen:j,onClose:Z,onConfirm:I,isEnabling:z}),(0,t.jsx)(o.V,{isOpen:k,hasCredits:!1,onClose:B}),(0,t.jsx)(d.l,{isOpen:y,hasAutoReload:!!(null==T||null==(e=T.auto_reload_settings)?void 0:e.enabled),onClose:G})]})}function q(e){let{isOpen:s,overagesEnabled:a,messageLimit:l,isWarning:n=!1,onOveragesClick:d,onClose:u}=e,r=(0,v.A)(),o=(0,c.st)(),p=(0,g.mV)(),h=(0,g.UC)(),_=(0,g.bu)(),j=(0,g.tP)(),C=(0,g.wi)(),A=(0,g.$b)(),T=(0,i.Co)({shouldIncludeClaudeCode:!0}),N=h||_||j||C,q=j&&!h&&!_,S=(0,b.useExperiment)("claude_ai_hide_overages_option_at_rate_limit_hit",{disableExposureLog:p||!N}),D=N&&S.get("enabled",!1),{windowName:P,status:z}=(0,w.T)(null==l?void 0:l.windows),I=(0,M.useMemo)(()=>(null==z?void 0:z.resets_at)?new Date(1e3*z.resets_at):null,[null==z?void 0:z.resets_at]),L=(0,M.useMemo)(()=>I?r.formatDate(I,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"}):null,[r,I]),O=(0,M.useMemo)(()=>N&&!D?null:P&&I&&"overage"!==P?"5h"===P?r.formatMessage({defaultMessage:"Wait until {resetHour}",id:"0rNZILlkMs"},{resetHour:r.formatTime(I,{hour:"numeric"})}):r.formatMessage({defaultMessage:"Wait until {resetDayOfWeek}",id:"q0dq8jPlbz"},{resetDayOfWeek:r.formatDate(I,{weekday:"long"})}):r.formatMessage({defaultMessage:"No, thanks",id:"fFaCQIK3h3"}),[r,N,D,P,I]);(0,M.useEffect)(()=>{s&&(o.track({event_key:"claudeai.overages_or_upgrades_upsell_modal.viewed",limit_window:P,paid_account_tier:A,can_upgrade:N,should_hide_overages_option:D,is_warning:n}),localStorage.setItem(k,new Date().toISOString()))},[s,o,P,A,N,D,n]);let E=(0,M.useCallback)(()=>{o.track({event_key:"claudeai.overages_or_upgrades_upsell_modal.overages_clicked",limit_window:P,paid_account_tier:A,can_upgrade:N,overages_enabled:a,is_warning:n}),d()},[o,P,A,N,a,n,d]),F=(0,M.useCallback)(()=>{o.track({event_key:"claudeai.overages_or_upgrades_upsell_modal.upgrade_clicked",limit_window:P,paid_account_tier:A,can_upgrade:N,overages_enabled:a,is_warning:n})},[o,P,A,N,a,n]),Z=(0,M.useCallback)(()=>{o.track({event_key:"claudeai.overages_or_upgrades_upsell_modal.closed",limit_window:P,paid_account_tier:A,can_upgrade:N,is_warning:n}),u()},[o,P,A,N,n,u]),{upgradeButtonText:B,upgradeHref:G,upgradeSellingPoints:R}=(0,M.useMemo)(()=>h?{upgradeButtonText:r.formatMessage({defaultMessage:"Upgrade to Pro",id:"5N04mo7WNC"}),upgradeHref:"/upgrade/pro",upgradeSellingPoints:i.B5}:_?{upgradeButtonText:r.formatMessage({defaultMessage:"Upgrade to Max",id:"z+PtTMgM3T"}),upgradeHref:"/upgrade?hide_pro=true",upgradeSellingPoints:i.iI}:j?{upgradeButtonText:r.formatMessage({defaultMessage:"Upgrade to Max 20x",id:"QxoK671Kmz"}),upgradeHref:"/upgrade",upgradeSellingPoints:[]}:C?{upgradeButtonText:r.formatMessage({defaultMessage:"Upgrade to Team",id:"SxBLzkDV6M"}),upgradeHref:"/upgrade?initialPlanType=team",upgradeSellingPoints:T}:{upgradeButtonText:null,upgradeHref:null,upgradeSellingPoints:null},[r,h,_,j,C,T]),V=(0,M.useCallback)(()=>n?L?r.formatMessage({defaultMessage:"You're approaching your plan's message limit. Your limit resets at {resetTime}. To keep working without interruption, you can:",id:"zpQDCAkZuR"},{resetTime:L}):r.formatMessage({defaultMessage:"You're approaching your plan's message limit. To keep working without interruption, you can:",id:"hrYvgG7u2P"}):L?r.formatMessage({defaultMessage:"You've reached your plan's message limit. You can wait until it resets at {resetTime}, or continue now:",id:"GCY/aSohFS"},{resetTime:L}):r.formatMessage({defaultMessage:"You've reached your plan's message limit. You can wait until it resets at the scheduled time, or continue now:",id:"Shyct06Bi/"}),[r,L,n]),W=(0,M.useMemo)(()=>N?D?B&&G?(0,t.jsxs)(t.Fragment,{children:[q?(0,t.jsx)("p",{className:"mt-2 mb-5 text-sm",children:n?(0,t.jsx)(y.A,{defaultMessage:"You're approaching your plan's message limit. To keep working without interruption, you can upgrade to Max 20x for 4x your current usage limits.",id:"XsmDTTFl4K"}):(0,t.jsx)(y.A,{defaultMessage:"You've reached your plan's message limit. You can wait until it resets, or continue now by upgrading to Max 20x for 4x your current usage limits.",id:"qgqE0A02N9"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"mt-2 mb-5 text-sm",children:V()}),(0,t.jsx)("ul",{className:"mb-8",children:R.map((e,s)=>{let{text:a}=e;return(0,t.jsx)(U,{benefitText:a},s)})})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-end gap-2",children:[(0,t.jsx)(x.$,{className:"w-full",href:G,onClick:F,children:B}),(0,t.jsx)(x.$,{variant:"ghost",className:"w-full underline",onClick:Z,children:O})]})]}):null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"mt-2 mb-5 text-sm text-text-500",children:V()}),(0,t.jsxs)("div",{className:"flex flex-row items-stretch gap-4",children:[(0,t.jsx)(Y,{title:r.formatMessage({defaultMessage:"Pay per message",id:"dtazUCgjED"}),description:r.formatMessage({defaultMessage:"Get extra usage to finish what you're working on.",id:"qRgjP76jll"}),PictogramComponent:m.ObjectBolt,onClick:E}),G&&(0,t.jsx)(Y,{title:r.formatMessage({defaultMessage:"Upgrade to a higher plan",id:"MqTWZ29Lwe"}),description:r.formatMessage({defaultMessage:"Get higher limits and do more with Claude.",id:"YrmCb0w4py"}),PictogramComponent:m.ObjectUpwardGraph,href:G,onClick:F})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"mt-2 mb-5 text-sm",children:V()}),(0,t.jsxs)("ul",{className:"mb-8",children:[(0,t.jsx)(U,{benefitText:(0,t.jsx)(y.A,{defaultMessage:"Continue without interruption",id:"0WkTDuwIgp"})}),(0,t.jsx)(U,{benefitText:(0,t.jsx)(y.A,{defaultMessage:"Pay only for what you use",id:"8FFgJKCSbr"})}),(0,t.jsx)(U,{benefitText:(0,t.jsx)(y.A,{defaultMessage:"Control costs with spending caps",id:"NMNGH13oxY"})}),(0,t.jsx)(U,{benefitText:(0,t.jsx)(y.A,{defaultMessage:"Track usage in real time",id:"eR6EzdokAj"})}),(0,t.jsx)(U,{benefitText:(0,t.jsx)(y.A,{defaultMessage:"Works with Claude.ai and Claude Code",id:"dkoDCo77YZ"})}),(0,t.jsx)(U,{benefitText:(0,t.jsx)(y.A,{defaultMessage:"Auto-reload when balance runs low",id:"C0IHaxOPo4"})})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-end gap-2",children:[(0,t.jsx)(x.$,{className:"w-full",onClick:E,children:(0,t.jsx)(y.A,{defaultMessage:"Get extra usage",id:"tYq4Dt6buP"})}),(0,t.jsx)(x.$,{variant:"ghost",className:"w-full underline",onClick:Z,children:O})]})]}),[q,N,Z,E,r,B,G,R,O,D,F,V,n]),X=!N||D;return(0,t.jsxs)(f.aF,{isOpen:s,modalSize:X?"sm":"2lg",backgroundColor:X?"bg-bg-100":"bg-bg-200",overlayClassName:"z-toast",onClose:Z,children:[(0,t.jsx)("div",{className:"absolute top-3 right-4",children:(0,t.jsx)(f.s_,{onClose:Z})}),(0,t.jsx)("h2",{className:"font-title",children:(0,t.jsx)(y.A,{defaultMessage:"Keep using Claude?",id:"cTZJslVw1b"})}),W]})}let S="flex flex-col flex-1 p-6 justify-between rounded-xl border text-left bg-bg-100 border-border-300 hover:border-border-100 min-h-[300px] shadow-sm";function Y(e){let{title:s,description:a,PictogramComponent:l,href:n,onClick:i}=e,d=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex-none",children:[(0,t.jsx)("h3",{className:"mb-2 font-semibold",children:s}),(0,t.jsx)("p",{className:"font-base text-text-500",children:a})]}),(0,t.jsx)(l,{size:"small"})]});return n?(0,t.jsx)(j(),{className:S,href:n,onClick:i,children:d}):(0,t.jsx)("button",{className:S,onClick:i,children:d})}function U(e){let{benefitText:s}=e;return(0,t.jsxs)("li",{className:"flex items-start gap-2.5 mb-1 text-text-300",children:[(0,t.jsx)(h.S,{className:"mt-0.5 flex-shrink-0",size:18}),(0,t.jsx)("span",{className:"text-sm",children:s})]})}},0x7ee609c5:(e,s,a)=>{a.d(s,{B5:()=>d,Co:()=>u,R9:()=>x,Um:()=>o,Un:()=>m,iI:()=>r,iq:()=>g,ss:()=>c});var t=a(0x22102fd88),l=a(0xac309a83),n=a(0xfc89b4a4),i=a(0x38e6572);let d=[{text:(0,t.jsx)(i.A,{defaultMessage:"More usage than Free*",id:"8OZA8mL5V6"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Access more Claude models",id:"VNnG3dsf56"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Unlimited Projects to organize chats",id:"0XMkifWGAQ"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Unlock deep Research tools",id:"5zlLEZd5ML"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Use extended thinking for complex work",id:"ME7eYKvB/9"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Connect Google Workspace: email, calendar, and docs",id:"WwXweMd3IE"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Integrations with remote MCP",id:"l9qtAfBnTU"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Includes Claude Code",id:"qavaSjp85p"}),tooltipContent:"Claude Code is a command-line tool that allows you to delegate any coding task to Claude directly from your terminal.",tooltipLearnMoreUrl:"https://claude.com/product/claude-code"}],u=e=>{let{shouldIncludeClaudeCode:s}=e,a=(0,l.fS)("teams_sso_enabled");return(0,n.useMemo)(()=>[{text:(0,t.jsx)(i.A,{defaultMessage:"More usage",id:"BmuMoRlZ70"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Central billing and administration",id:"m0TzBiIhvZ"})},a?{text:(0,t.jsx)(i.A,{defaultMessage:"Single sign-on (SSO) and domain capture",id:"8ZZduOA+Di"})}:null,{text:(0,t.jsx)(i.A,{defaultMessage:"Early access to collaboration features",id:"Ne+gtmuqX2"})},!s?null:{text:(0,t.jsx)(i.A,{defaultMessage:"Claude Code available with premium seat",id:"S6vF0mSVGc"})}].filter(e=>null!==e),[a,s])},r=[{text:(0,t.jsx)(i.A,{defaultMessage:"Choose 5x or 20x more usage than Pro*",id:"Hfxoyy1aNF"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Higher output limits for all tasks",id:"GagvZM9roV"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Early access to advanced Claude features",id:"4lOuLo24hP"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Priority access at high traffic times",id:"P6GgnebqRh"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Includes Claude Code",id:"qavaSjp85p"}),tooltipContent:"Claude Code is a command-line tool that allows you to delegate any coding task to Claude directly from your terminal.",tooltipLearnMoreUrl:"https://claude.com/product/claude-code"}],o=e=>{let{showSeatManagementFeatures:s}=e,a=(0,l.fS)("teams_sso_enabled");return(0,n.useMemo)(()=>[{text:(0,t.jsx)(i.A,{defaultMessage:"More usage",id:"BmuMoRlZ70"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Enhanced context window",id:"HDUFeKYm6W"})},a?null:{text:(0,t.jsx)(i.A,{defaultMessage:"Single sign-on (SSO) and domain capture",id:"8ZZduOA+Di"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Role-based access with fine grained permissioning",id:"WGjpyApkxf"})},{text:(0,t.jsx)(i.A,{defaultMessage:"System for Cross-domain Identity Management (SCIM)",id:"VHD4aUZXCE"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Audit logs",id:"1rMFg0JQMQ"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Google Docs cataloging",id:"RYHb4LZpOz"})},s?{text:(0,t.jsx)(i.A,{defaultMessage:"Claude Code available with premium seat",id:"S6vF0mSVGc"})}:null,s?{text:(0,t.jsx)(i.A,{defaultMessage:"Compliance API for observability and monitoring",id:"lpFUMU324g"})}:null].filter(e=>null!==e),[a,s])},c=[{text:(0,t.jsx)(i.A,{defaultMessage:"Chat with Claude on web, iOS, and Android",id:"pbijGfTUUI"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Write, edit, and create content",id:"JD3LFRaiXU"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Analyze text and upload images",id:"6r7fzBxhLa"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Generate code and visualize data",id:"FEmwkli1hU"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Get web search results inside chat",id:"NFBIWuilpU"})}],g=[{text:(0,t.jsx)(i.A,{defaultMessage:"Access Claude Code terminal interface",id:"j1feY66uHz"})},{text:(0,t.jsx)(i.A,{defaultMessage:"5x more usage than our free tier for coding sessions",id:"/84EZuBIXX"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Claude Sonnet 4 for coding tasks",id:"YUXhG8b7by"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Multi-file codebase understanding",id:"uNBFc3JxQX"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Direct terminal integration with your dev tools",id:"RAHh+zdlmg"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Access to chat features: unlimited Projects, deep Research tools, extended thinking, and more",id:"DFsUKZv5Fz"})}],m=[{text:(0,t.jsx)(i.A,{defaultMessage:"Single sign-on (SSO) and domain capture",id:"8ZZduOA+Di"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Early access to collaboration features",id:"Ne+gtmuqX2"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Unlimited projects to organize chats",id:"bUCQHXUsUI"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Unlock deep research tools",id:"Y2Oz+eDdnw"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Claude Code available with premium seats",id:"8rncIx4/Gj"})},{text:(0,t.jsx)(i.A,{defaultMessage:"More usage than free*",id:"PFwtje3iia"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Central billing and administration",id:"m0TzBiIhvZ"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Connect Google Workspace: email, calendar, and docs",id:"WwXweMd3IE"})}],x=[{text:(0,t.jsx)(i.A,{defaultMessage:"5-20x higher usage limits for extended coding sessions",id:"J1shCXZZzh"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Access to Claude Opus 4 for complex architectural decisions",id:"KSPrhFDUq9"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Handle larger codebases without hitting limits",id:"bF+qsG1XQ1"})},{text:(0,t.jsx)(i.A,{defaultMessage:"Priority processing during high-traffic periods",id:"/F6llV57Js"})}]},0xac06e3dc:(e,s,a)=>{a.d(s,{T:()=>t});function t(e,s){var a,t,l,n,i,d,u,r,o,c,g,m,x,f,p,h,b,_;if(!e)return{windowName:null,status:null,surpassedThreshold:null};let j=null==(o=null==s?void 0:s.startsWith("claude-opus"))||o,M=null!=(c=null==s?void 0:s.startsWith("claude-sonnet"))&&c,v=(null==(a=e["5h"])?void 0:a.status)==="exceeded_limit",y=(null==(t=e["7d"])?void 0:t.status)==="exceeded_limit",w=j&&(null==(l=e["7d_opus"])?void 0:l.status)==="exceeded_limit",k=M&&(null==(n=e["7d_sonnet"])?void 0:n.status)==="exceeded_limit",C=(null==(i=e.overage)?void 0:i.status)==="exceeded_limit";if((y||v||w||k)&&C)return{windowName:"overage",status:e.overage,surpassedThreshold:null!=(m=null==(g=e.overage)?void 0:g.surpassed_threshold)?m:null};let A=[];if(v&&A.push({name:"5h",resetTime:e["5h"].resets_at}),y&&A.push({name:"7d",resetTime:e["7d"].resets_at}),w&&A.push({name:"7d_opus",resetTime:e["7d_opus"].resets_at}),k&&A.push({name:"7d_sonnet",resetTime:e["7d_sonnet"].resets_at}),A.length>1){let s=A.reduce((e,s)=>s.resetTime>e.resetTime?s:e);return{windowName:s.name,status:e[s.name],surpassedThreshold:null}}return w?{windowName:"7d_opus",status:e["7d_opus"],surpassedThreshold:null}:k?{windowName:"7d_sonnet",status:e["7d_sonnet"],surpassedThreshold:null}:y?{windowName:"7d",status:e["7d"],surpassedThreshold:null}:v?{windowName:"5h",status:e["5h"],surpassedThreshold:null}:(null==(d=e["5h"])?void 0:d.status)==="approaching_limit"?{windowName:"5h",status:e["5h"],surpassedThreshold:null!=(f=null==(x=e["5h"])?void 0:x.surpassed_threshold)?f:null}:(null==(u=e["7d"])?void 0:u.status)==="approaching_limit"?{windowName:"7d",status:e["7d"],surpassedThreshold:null!=(h=null==(p=e["7d"])?void 0:p.surpassed_threshold)?h:null}:(null==(r=e.overage)?void 0:r.status)==="approaching_limit"?{windowName:"overage",status:e.overage,surpassedThreshold:null!=(_=null==(b=e.overage)?void 0:b.surpassed_threshold)?_:null}:{windowName:null,status:null,surpassedThreshold:null}}},0x205c58b16:(e,s,a)=>{a.d(s,{Hk:()=>x,LO:()=>h,M_:()=>m,Nf:()=>b,RN:()=>c,Us:()=>g,bA:()=>o,fQ:()=>f,oM:()=>p});var t=a(0x12c9046cd),l=a(0x14de19ae8),n=a(0x1cef2276b),i=a(0x49fac030),d=a(0xc1dd9efc),u=a(0x17e725145),r=a(0xfc89b4a4);function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:s}=(0,l.YL)(),a=(0,u.useQueryClient)(),n=null==s?void 0:s.uuid,d=(0,l.mV)();return(0,t.L2)("/api/organizations/".concat(n,"/admin_requests"),"POST",{...e,onSuccess(s,t,l){var d;a.setQueryData([i.zD,{orgUuid:n,requestType:t.request_type,statuses:"pending"}],[s]),null==(d=e.onSuccess)||d.call(e,s,t,l)},enabled:!!s&&d})}function c(e,s,a){var n;let{activeOrganization:d}=(0,l.YL)(),u=null==d?void 0:d.uuid,r=(0,l.mV)(),o="/api/organizations/".concat(u,"/admin_requests/me?request_type=").concat(e);for(let e of s)o+="&statuses=".concat(e);return(0,t.Sk)(o,{queryKey:[i.zD,{orgUuid:u,requestType:e,statuses:s.sort((e,s)=>e.localeCompare(s)).join(",")}],enabled:!!d&&r&&(null==(n=null==a?void 0:a.enabled)||n),staleTime:3e5,meta:{noToast:!0}})}function g(e){var s;let{activeOrganization:a}=(0,l.YL)(),u=null==a?void 0:a.uuid,r=(0,l.mV)(),o=(0,n.b)(d.Nt.MembersManage);return(0,t.Sk)("/api/organizations/".concat(u,"/admin_requests/seat_upgrade"),{queryKey:[i.Ld,{orgUuid:u}],enabled:!!a&&r&&o&&(null==(s=null==e?void 0:e.enabled)||s),staleTime:3e5,meta:{noToast:!0}})}function m(e){var s;let{activeOrganization:a}=(0,l.YL)(),u=null==a?void 0:a.uuid,r=(0,l.mV)(),o=(0,n.b)(d.Nt.BillingManage);return(0,t.Sk)("/api/organizations/".concat(u,"/admin_requests/limit_increase"),{queryKey:[i.Z9,{orgUuid:u}],enabled:!!a&&r&&o&&(null==(s=null==e?void 0:e.enabled)||s),staleTime:3e5,meta:{noToast:!0}})}function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:s}=(0,l.YL)(),a=(0,u.useQueryClient)(),n=null==s?void 0:s.uuid,d=(0,l.mV)();return(0,t.L2)(e=>"/api/organizations/".concat(n,"/admin_requests/").concat(e.requestUuid,"/dismiss"),"POST",{...e,onSuccess(s,t,l){var d;"seat_upgrade"===s.request_type?a.setQueryData([i.Ld,{orgUuid:n}],e=>null==e?void 0:e.filter(e=>e.uuid!==s.uuid)):a.setQueryData([i.Z9,{orgUuid:n}],e=>null==e?void 0:e.filter(e=>e.uuid!==s.uuid)),null==(d=e.onSuccess)||d.call(e,s,t,l)},enabled:!!s&&d})}function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:s}=(0,l.YL)(),a=(0,u.useQueryClient)(),n=null==s?void 0:s.uuid,d=(0,l.mV)();return(0,t.L2)(e=>"/api/organizations/".concat(n,"/admin_requests/dismiss_all?request_type=").concat(e.requestType),"POST",{...e,onSuccess(s,t,l){var d;"seat_upgrade"===t.requestType?a.setQueryData([i.Ld,{orgUuid:n}],[]):a.setQueryData([i.Z9,{orgUuid:n}],[]),null==(d=e.onSuccess)||d.call(e,s,t,l)},enabled:!!s&&d})}function p(e){return!!e&&e.some(e=>"pending"===e.status)}function h(e){return!!e&&e.some(e=>{if("dismissed"!==e.status)return!1;let s=e.resolved_at;if(!s)return!0;let a=new Date(s);return Date.now()-a.getTime()<2592e6})}function b(){let e=(0,u.useQueryClient)(),{activeOrganization:s}=(0,l.YL)(),a=null==s?void 0:s.uuid;return(0,r.useCallback)(s=>{!function(e,s,a){if(!s||0===a.length)return;let t=new Set(a);e.setQueryData([i.Ld,{orgUuid:s}],e=>null==e?void 0:e.filter(e=>!e.requester_uuid||!t.has(e.requester_uuid))),e.setQueryData([i.Z9,{orgUuid:s}],e=>null==e?void 0:e.filter(e=>!e.requester_uuid||!t.has(e.requester_uuid)))}(e,a,s)},[e,a])}},0x242212ea2:(e,s,a)=>{a.d(s,{fe:()=>M,h$:()=>Y,hi:()=>v});var t=a(0x22102fd88),l=a(0x205c58b16),n=a(0xfab48d52),i=a(0xfa857e79),d=a(0x1e6505f0b),u=a(0xeaff4de),r=a(0xf32c56dd),o=a(0xa5acf583),c=a(0x14de19ae8),g=a(0x139b5e710),m=a(0x22fc8d729),x=a(0x49fac030),f=a(0xac309a83),p=a(0x78b33fbd),h=a(0x17e725145),b=a(0xfc89b4a4),_=a(0x38e6572),j=a(0x1ab0d1ca1);let M=()=>{let e=(0,c.Hz)(),s=(0,f.fS)("c4w_usage_limit_notifications_enabled"),a=(0,p.useExperiment)("teams_usage_limit_notifications");return!!s&&(!e||a.get("enabled",!1))};function v(){let{allowSelfUpgrade:e=!0,messageLimit:s,isWarning:a=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,c.mV)(),i=(0,c.Kq)(),u=(0,d.o)(),r=M(),g=function(e){let s=(0,c.UC)(),a=(0,c.wi)(),t=(0,c.bu)(),l=(0,c.tP)(),i=(0,c.Kq)(),u=(0,o.fZ)(),r=(0,c.mV)(),g=(0,d.o)(),m=M(),{data:x}=(0,n.Wm)(),f=(null==x?void 0:x.isEnabled)||!1;return u?(s||t||l)&&e?s?a||t||l?"subscribe":"subscribe-pro-only":t?y({isOveragesProvisioningAvailable:g,canManageBilling:i,isRaven:r})?"overages-or-upgrade":"subscribe-max":l?y({isOveragesProvisioningAvailable:g,canManageBilling:i,isRaven:r})?"overages-or-upgrade":"subscribe-max-20x":"none":g?r&&!i&&m?f?"none":"request-extra-usage":r?"enable-overages":"overages-or-upgrade":"none":"contact-sales"}(e),m=null;switch(g){case"contact-sales":m=(0,t.jsx)(w,{});break;case"subscribe":m=(0,t.jsx)(k,{});break;case"subscribe-pro-only":m=(0,t.jsx)(C,{});break;case"subscribe-max":m=(0,t.jsx)(A,{});break;case"subscribe-max-20x":m=(0,t.jsx)(T,{});break;case"enable-overages":m=(0,t.jsx)(N,{});break;case"overages-or-upgrade":m=(0,t.jsx)(q,{messageLimit:s,isWarning:a});break;case"request-extra-usage":m=(0,t.jsx)(S,{isOverageWarning:!1});break;case"none":m=null}return!r&&l&&u&&!i?{limitActionButtonType:"legacy-contact-admin",limitActionButton:null}:{limitActionButtonType:g,limitActionButton:m}}function y(e){let{isOveragesProvisioningAvailable:s,canManageBilling:a,isRaven:t}=e;return s&&a&&!t}function w(){let{websiteBaseUrl:e}=(0,o._r)();return(0,t.jsx)(m.Y,{href:"".concat(e,"/contact-sales"),className:"text-sm",children:(0,t.jsx)(_.A,{defaultMessage:"Contact us to upgrade",id:"VifKcG4Va9"})})}function k(){return(0,t.jsx)(m.Y,{href:"/upgrade?hide_free=true",className:"text-sm",children:(0,t.jsx)(_.A,{defaultMessage:"Upgrade",id:"0h/lPMeYkq"})})}function C(){return(0,t.jsx)(m.Y,{href:"/upgrade/pro",className:"text-sm",children:(0,t.jsx)(_.A,{defaultMessage:"Upgrade",id:"0h/lPMeYkq"})})}function A(){return(0,t.jsx)(m.Y,{href:"/upgrade?hide_pro=true",className:"text-sm",children:(0,t.jsx)(_.A,{defaultMessage:"Upgrade",id:"0h/lPMeYkq"})})}function T(){return(0,t.jsx)(m.Y,{href:"/upgrade",className:"text-sm",children:(0,t.jsx)(_.A,{defaultMessage:"Upgrade",id:"0h/lPMeYkq"})})}function N(){let{track:e}=(0,r.st)(),s=(0,c.mV)(),a=(0,c.Kq)(),l=b.useRef(!1);b.useEffect(()=>{l.current||(l.current=!0,e({event_key:"claudeai.limit_action.enable_overages.shown",data:{user_type:a?"admin":"member"}}))},[e,a]);let n=(0,b.useCallback)(()=>{e({event_key:"claudeai.limit_action.enable_overages.clicked",data:{user_type:a?"admin":"member"}})},[e,a]);return(0,t.jsx)(m.Y,{href:s&&a?"/admin-settings/usage":"/settings/usage",className:"text-sm",onClick:n,children:(0,t.jsx)(_.A,{defaultMessage:"Keep working",id:"YJG5oUjsVT"})})}function q(e){let{messageLimit:s,isWarning:a=!1}=e,l=b.useRef(!1);(0,b.useEffect)(()=>{if(!a&&!l.current){let e=localStorage.getItem(u.Yo);if(e){let s=new Date(e).getTime();if(new Date().getTime()-s<u.ug)return}null===u.XI||void 0===u.XI||(0,u.XI)(s,a),l.current=!0}},[a]);let n=(0,b.useCallback)(()=>{null===u.XI||void 0===u.XI||(0,u.XI)(s,a)},[s,a]);return(0,t.jsx)(m.Y,{className:"text-sm",onClick:n,children:a?(0,t.jsx)(_.A,{defaultMessage:"Get more usage",id:"Ri3L5XBXx2"}):(0,t.jsx)(_.A,{defaultMessage:"Keep working",id:"YJG5oUjsVT"})})}function S(e){let{isOverageWarning:s}=e,a=(0,j.A)(),{track:n}=(0,r.st)(),i=(0,h.useQueryClient)(),{addSuccess:d,addError:u}=(0,g.Yf)(),{activeOrganization:o}=(0,c.YL)(),f=null==o?void 0:o.uuid,{data:p,isLoading:M}=(0,l.RN)("limit_increase",["pending","dismissed"]),{mutateAsync:v,isPending:y}=(0,l.bA)(),w=(0,l.oM)(p),k=(0,l.LO)(p),C=M||w||k,A=b.useRef(!1),T=!M&&!w&&!k;b.useEffect(()=>{T&&!A.current&&(A.current=!0,n({event_key:"claudeai.admin_request.limit_increase.shown",data:{source:s?"overage_warning":"limit_exceeded"}}))},[T,n,s]);let N=(0,b.useCallback)(async()=>{if(!C){n({event_key:"claudeai.admin_request.limit_increase.member_request_clicked",data:{source:s?"overage_warning":"limit_exceeded"}});try{let e=await v({request_type:"limit_increase",details:null});i.setQueryData([x.zD,{orgUuid:f,requestType:"limit_increase",statuses:"dismissed,pending"}],s=>[...null!=s?s:[],e]),d(a.formatMessage({defaultMessage:"Your request has been sent to your admin.",id:"ROnsgIHUkE"}))}catch(e){u(a.formatMessage({defaultMessage:"There was an error submitting your request. Please try again later.",id:"3Kuk8BVb9J"}),{messageForLogging:"There was an error submitting your request. Please try again later."})}}},[a,n,s,i,f,v,d,u,C]);return M||!w&&k?null:w?(0,t.jsx)("span",{className:"font-base text-text-500 opacity-50",children:(0,t.jsx)(_.A,{defaultMessage:"Request sent to admin",id:"n8OjslQAdc"})}):(0,t.jsx)(m.Y,{className:"font-base",disabled:y,onClick:N,children:s?(0,t.jsx)(_.A,{defaultMessage:"Request more",id:"vi9dUGyGRX"}):(0,t.jsx)(_.A,{defaultMessage:"Request extra usage",id:"gJ4VdAaFXc"})})}function Y(e){let s,{messageLimit:a}=e,l=(0,c.mV)(),n=(0,c.Kq)(),i=M(),d=null==a?void 0:a.overageDisabledReason,u=null;switch(s="out_of_credits"===d||"org_level_disabled_until"===d||"org_service_zero_credit_limit"===d?l?n?"manage-usage":"none":"add-funds":l?n?"manage-usage":"request-more-extra-usage":"manage-usage"){case"add-funds":u=(0,t.jsx)(U,{});break;case"manage-usage":u=(0,t.jsx)(D,{});break;case"request-more-extra-usage":u=(0,t.jsx)(S,{isOverageWarning:!0});break;case"none":u=null}return"add-funds"===s||i?{overageActionButtonType:s,overageActionButton:u}:{overageActionButtonType:"legacy-contact-admin",overageActionButton:null}}function U(){let{track:e}=(0,r.st)(),[s,a]=(0,b.useState)(!1),l=b.useRef(!1);b.useEffect(()=>{l.current||(l.current=!0,e({event_key:"claudeai.limit_action.add_funds.shown"}))},[e]);let n=(0,b.useCallback)(()=>{e({event_key:"claudeai.limit_action.add_funds.clicked"}),a(!0)},[e]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:n,className:"underline text-sm",children:(0,t.jsx)(_.A,{defaultMessage:"Buy more",id:"3dtNpsoQpp"})}),(0,t.jsx)(i.l,{isOpen:s,onClose:()=>a(!1)})]})}function D(){let{track:e}=(0,r.st)(),s=(0,c.mV)(),a=(0,c.Kq)(),l=b.useRef(!1);b.useEffect(()=>{l.current||(l.current=!0,e({event_key:"claudeai.limit_action.manage_usage.shown",data:{user_type:a?"admin":"member"}}))},[e,a]);let n=(0,b.useCallback)(()=>{e({event_key:"claudeai.limit_action.manage_usage.clicked",data:{user_type:a?"admin":"member"}})},[e,a]);return(0,t.jsx)(m.Y,{href:s?"/admin-settings/usage":"/settings/usage",className:"text-sm",onClick:n,children:(0,t.jsx)(_.A,{defaultMessage:"Manage spending limit",id:"fnKooUgzWq"})})}}}]);
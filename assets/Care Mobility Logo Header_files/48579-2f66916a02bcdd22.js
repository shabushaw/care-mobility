try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="c00cdb27-8567-4a9f-b093-0e2bc3fe5c78",e._sentryDebugIdIdentifier="sentry-dbid-c00cdb27-8567-4a9f-b093-0e2bc3fe5c78")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:anthropic-apps":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[48579],{0x4339cba:(e,n,i)=>{i.d(n,{NW:()=>a,un:()=>t});var a=function(e){return e.MONTHLY="monthly",e.YEARLY="yearly",e}({}),t=function(e){return e.FIVE_X="max_5x",e.TWENTY_X="max_20x",e}({})},0x2771fcb3:(e,n,i)=>{i.d(n,{Nk:()=>v,bf:()=>m,dd:()=>g,fp:()=>f,y0:()=>_});var a=i(0x12c9046cd),t=i(0x14de19ae8),r=i(0x139b5e710),u=i(0x1016c6ed2),l=i(0x49fac030),o=i(0xac309a83),s=i(0x17e725145),d=i(0xfc89b4a4),c=i(0x22be9474c);let y=function(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",{activeOrganization:i}=(0,t.YL)(),r=new URLSearchParams;"owners_admins"===n&&(r.append("roles[]","owner"),r.append("roles[]","primary_owner"),r.append("roles[]","membership_admin"));let u=r.toString(),o="/api/organizations/".concat(null!=(e=null==i?void 0:i.uuid)?e:"","/members").concat(u?"?".concat(u):"");return(0,a.Sk)(o,{enabled:!!(null==i?void 0:i.uuid)&&(i.capabilities.includes("api")||i.capabilities.includes("raven")),queryKey:[l.si,{orgUuid:null==i?void 0:i.uuid,roleFilter:n}],staleTime:0})},v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",n=y(e),i=g(),a=(0,t.zm)(),r=(0,d.useMemo)(()=>{if(!i||!n.data)return n.data;let e=a?"enterprise_standard":"team_standard";return n.data.map(n=>({...n,seat_tier:n.seat_tier||e}))},[i,n.data,a]);return{...n,data:r}},_=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:i}=(0,t.YL)(),r=(0,s.useQueryClient)();return(0,a.L2)(n=>{var a;return"/api/organizations/".concat(null!=(a=null==i?void 0:i.uuid)?a:"","/members/").concat(e||n.memberUuid)},"PUT",{...n,meta:{errorMessage:"There was an error updating the user.",...n.meta},async onSuccess(){for(var e,a=arguments.length,t=Array(a),u=0;u<a;u++)t[u]=arguments[u];await Promise.all([r.invalidateQueries({queryKey:[l.si,{orgUuid:null==i?void 0:i.uuid}]}),r.invalidateQueries({queryKey:[l.ZD,{orgUuid:null==i?void 0:i.uuid}]}),r.invalidateQueries({queryKey:[l.rx]}),r.invalidateQueries({queryKey:[l.cz]})]),await (null==(e=n.onSuccess)?void 0:e.call(n,...t))}})},p=function(){var e;let{offset:n=0,limit:i=30,search:r="",roleFilter:u="all",enabled:o=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:s}=(0,t.YL)(),d=new URLSearchParams({offset:n.toString(),limit:i.toString()});return r&&d.append("search",r),"owners_admins"===u&&(d.append("roles[]","owner"),d.append("roles[]","primary_owner"),d.append("roles[]","membership_admin")),(0,a.Sk)("/api/organizations/".concat(null!=(e=null==s?void 0:s.uuid)?e:"","/members_v2?").concat(d),{enabled:o&&!!(null==s?void 0:s.uuid)&&(s.capabilities.includes("api")||s.capabilities.includes("raven")),queryKey:[l.rx,{orgUuid:null==s?void 0:s.uuid,offset:n,limit:i,search:r,roleFilter:u}],staleTime:0})},m=function(){let{offset:e=0,limit:n=30,search:i="",roleFilter:a="all",enabled:r=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=p({offset:e,limit:n,search:i,roleFilter:a,enabled:r}),l=g(),o=(0,t.zm)(),s=(0,d.useMemo)(()=>{if(!l||!u.data)return u.data;let e=o?"enterprise_standard":"team_standard";return{...u.data,data:u.data.data.map(n=>"member"===n.type?{...n,member:{...n.member,seat_tier:n.member.seat_tier||e}}:"invite"===n.type?{...n,invite:{...n.invite,seat_tier:n.invite.seat_tier||e}}:n)}},[l,u.data,o]);return{...u,data:s}},f=function(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=(0,s.useQueryClient)(),{addError:o}=(0,r.Yf)(),d=(0,c.kP)(),y="uuid"in n?n.uuid:n.account.uuid,v="email_address"in n?n.email_address:n.account.email_address;return(0,a.L2)("/api/organizations/".concat(e,"/members/").concat(y),"DELETE",{...i,meta:{noToast:!0},async onSuccess(){for(var n,a=arguments.length,r=Array(a),u=0;u<a;u++)r[u]=arguments[u];await t.invalidateQueries({queryKey:[l.si,{orgUuid:e}]}),await t.invalidateQueries({queryKey:[l.rx]}),t.invalidateQueries({queryKey:[l.MJ,e]}),t.invalidateQueries({queryKey:[l._S,e]}),await (null==(n=i.onSuccess)?void 0:n.call(i,...r))},onError(e){var n,i;e instanceof u.LG&&(null==(i=e.extra)||null==(n=i.details)?void 0:n.type)==="seat_minimum_reached"?o("You cannot go below ".concat(d," members.")):o("There was an error removing ".concat(v," from the organization."),{error:e})}})},g=()=>{let e=(0,o.fS)("c4w_contracted_shebang"),n=(0,o.fS)("aws_marketplace_seat_limit_enforcement"),{activeOrganization:i}=(0,t.YL)(),a=null==i?void 0:i.billing_type;return(0,d.useMemo)(()=>"stripe_subscription_contracted"===a?e:"aws_marketplace"===a?n:!a||"none"===a||"stripe_subscription"===a,[e,a,n])}},0x865ff458:(e,n,i)=>{i.d(n,{EL:()=>g,Hc:()=>_,XK:()=>p,Zl:()=>f,hz:()=>v,y_:()=>m});var a=i(0x12c9046cd),t=i(0x24553dffe),r=i(0x139b5e710),u=i(0x20e00cddd),l=i(0x49fac030),o=i(0xac309a83),s=i(0xfc89b4a4),d=i(0x1ab0d1ca1),c=i(0x156c4e43b),y=i(0x19572a4ef);function v(){var e;let n=(0,t.l)(),i=null!=(e=n.get(u.eT.PROMOTION))?e:null;return{data:(0,y.lx)(i),mutate:(0,s.useCallback)(e=>{n.set(u.eT.PROMOTION,JSON.stringify(e),{maxAgeSeconds:7776e3})},[n]),delete:(0,s.useCallback)(()=>{n.set(u.eT.PROMOTION,"",{maxAgeSeconds:0})},[n])}}function _(){var e,n,i;let{data:t}=v(),r=(n=null!=(e=null==t?void 0:t.promotionId)?e:null,i=e=>(0,y.IQ)(e,t),(0,a.Sk)("/api/billing/promotion/".concat(n),{queryKey:[l.t6,n],enabled:!!n,meta:{noToast:!0}},e=>(e.promotionId=n,i)?i(e):e));return{...r,isPending:r.isPending&&!!(null==t?void 0:t.promotionId)}}function p(){let{data:e,mutate:n}=v();(0,s.useEffect)(()=>{(null==e?void 0:e.needsCheckout)&&(e.needsCheckout=void 0,n(e))},[e,n])}function m(e){let{data:n,mutate:i}=v(),a=null==n?void 0:n.promotionId,t=(0,o.T9)("claude_ai_targeted_promotion","promotionId",null,c.Yj().nullable());return(0,s.useEffect)(()=>{!a&&t&&i({promotionId:t})},[a,t,i]),!!e&&!!(null==n?void 0:n.needsCheckout)&&!!(null==n?void 0:n.promotionId)}let f=()=>{let e=(0,s.useRef)(!1),n=(0,r.Yf)(),i=(0,d.A)(),{delete:a}=v();return(0,s.useCallback)(t=>{(null==t?void 0:t.offerError)&&!e.current&&(e.current=!0,n.addError(i.formatMessage({defaultMessage:"This promotion is not available for your account",id:"Vu9kt6ezVH"}),{error:Error(t.offerError),messageForLogging:"This promotion is not available for your account"}),a())},[n,a,i])},g=()=>{let e=(0,s.useRef)(!1),n=(0,r.Yf)(),i=(0,d.A)(),{delete:a}=v();return(0,s.useCallback)(t=>{(null==t?void 0:t.source)==="referral_code"&&(null==t?void 0:t.error)&&!e.current&&(e.current=!0,n.addError(i.formatMessage({defaultMessage:"This referral code is no longer valid",id:"Bsr7TrjB5Q"}),{error:Error(t.error),messageForLogging:"This referral code is no longer valid"}),a())},[n,a,i])}},0xea143dbe:(e,n,i)=>{i.d(n,{BF:()=>m,UV:()=>v,oF:()=>p,of:()=>y,tH:()=>_});var a=i(0x12c9046cd),t=i(0x14de19ae8),r=i(0x139b5e710),u=i(0x1016c6ed2),l=i(0x49fac030),o=i(0x17e725145),s=i(0xfc89b4a4),d=i(0x2771fcb3),c=i(0x22be9474c);let y=e=>{let n=(e=>{var n;let{activeOrganization:i}=(0,t.YL)(),r=new URLSearchParams;e&&e.length>0&&e.forEach(e=>r.append("roles[]",e));let u=r.toString(),o="/api/organizations/".concat(null!=(n=null==i?void 0:i.uuid)?n:"","/invites").concat(u?"?".concat(u):"");return(0,a.Sk)(o,{enabled:!!(null==i?void 0:i.uuid)&&(i.capabilities.includes("api")||i.capabilities.includes("raven")),queryKey:[l.ZD,{orgUuid:null==i?void 0:i.uuid,roles:e}],staleTime:0})})(e),i=(0,d.dd)(),{activeOrganization:r}=(0,t.YL)(),u=(0,s.useMemo)(()=>{if(!i||!n.data)return n.data;let e=(null==r?void 0:r.capabilities.includes("commercial_use"))?"enterprise_standard":"team_standard";return n.data.map(n=>({...n,seat_tier:n.seat_tier||e}))},[i,n.data,null==r?void 0:r.capabilities]);return{...n,data:u}},v=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(0,o.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(e,"/invites"),"POST",{...n,async onSuccess(){for(var a,t=arguments.length,r=Array(t),u=0;u<t;u++)r[u]=arguments[u];await i.invalidateQueries({queryKey:[l.ZD,{orgUuid:e}]}),await i.invalidateQueries({queryKey:[l.rx]}),i.invalidateQueries({queryKey:[l.MJ,e]}),i.invalidateQueries({queryKey:[l._S,e]}),await (null==(a=n.onSuccess)?void 0:a.call(n,...r))}})},_=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(0,o.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(e,"/invites/bulk"),"POST",{...n,async onSuccess(){for(var a,t=arguments.length,r=Array(t),u=0;u<t;u++)r[u]=arguments[u];await i.invalidateQueries({queryKey:[l.ZD,{orgUuid:e}]}),await i.invalidateQueries({queryKey:[l.rx]}),i.invalidateQueries({queryKey:[l.MJ,e]}),i.invalidateQueries({queryKey:[l._S,e]}),await (null==(a=n.onSuccess)?void 0:a.call(n,...r))}})},p=function(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=(0,o.useQueryClient)(),{addError:s}=(0,r.Yf)(),d=(0,c.kP)();return(0,a.L2)("/api/organizations/".concat(e,"/invites/").concat(n),"DELETE",{...i,meta:{noToast:!0},async onSuccess(){for(var n,a=arguments.length,r=Array(a),u=0;u<a;u++)r[u]=arguments[u];await t.invalidateQueries({queryKey:[l.ZD,{orgUuid:e}]}),await t.invalidateQueries({queryKey:[l.rx]}),t.invalidateQueries({queryKey:[l.MJ,e]}),t.invalidateQueries({queryKey:[l._S,e]}),await (null==(n=i.onSuccess)?void 0:n.call(i,...r))},onError(e){var n,i;e instanceof u.LG&&(null==(i=e.extra)||null==(n=i.details)?void 0:n.type)==="seat_minimum_reached"?s("You cannot go below ".concat(d," members.")):s("There was an error revoking the invite.",{error:e})}})},m=function(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=(0,o.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(e,"/invites/").concat(n),"PUT",{...i,async onSuccess(){for(var n,a=arguments.length,r=Array(a),u=0;u<a;u++)r[u]=arguments[u];await t.invalidateQueries({queryKey:[l.ZD,{orgUuid:e}]}),await t.invalidateQueries({queryKey:[l.rx]}),await (null==(n=i.onSuccess)?void 0:n.call(i,...r))}})}},0x19572a4ef:(e,n,i)=>{i.d(n,{IQ:()=>r,Jd:()=>a,lx:()=>t});let a=["proMonthlyPromoCode","proAnnualPromoCode","welcomeMessageTitle","utmParams","max5xMonthlyPromoCode","max20xMonthlyPromoCode"],t=e=>{if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},r=(e,n)=>(null==n?void 0:n.overrides)?{...e,...n.overrides}:e},0x1bdad8807:(e,n,i)=>{i.d(n,{nW:()=>f,bN:()=>g,Ri:()=>_,Ak:()=>y,ib:()=>m});var a=i(0x78b33fbd),t=i(0xfc89b4a4),r=i(0x49fac030),u=i(0x12c9046cd),l=i(0xa5acf583),o=i(0x14de19ae8),s=i(0xc6857cab);let d=async e=>{if(s.env.NEXT_PUBLIC_DISABLE_PAYMENTS)return Promise.resolve(null);let{loadStripe:n}=await i.e(13508).then(i.bind(i,0x2282f58c4));return n(e)},c=new Set(["AT","BE","BG","CH","CY","CZ","DE","DK","EE","ES","FI","FR","GB","GR","HR","HU","IE","IS","IT","LI","LT","LU","LV","MT","NL","NO","PL","PT","RO","SE","SI","SK"]);function y(e){let n=(0,l._r)(),i=(0,a.useDynamicConfig)("always_use_us_sandbox").get("always_use_us_sandbox",!1),r=(0,a.useDynamicConfig)("meb_enabled").get("meb_capability_enabled",!1);return(0,t.useMemo)(()=>i?"us_sandbox":r?e&&c.has(e.toUpperCase())?"ie":n.stripePublishableKeySandbox?"us_sandbox":"us":"us",[i,e,r,n.stripePublishableKeySandbox])}let v=["ar","bg","cs","da","de","el","en","en-AU","en-CA","en-NZ","en-GB","es","es-ES","es-419","et","fi","fil","fr","fr-CA","fr-FR","he","hu","hr","id","it","it-IT","ja","ko","lt","lv","ms","mt","nb","nl","no","pl","pt","pt-BR","ro","ru","sk","sl","sv","th","tr","vi","zh","zh-HK","zh-TW"],_=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,{activeOrganization:a}=(0,o.YL)(),{data:l,mutate:s,isIdle:d}=(0,u.L2)("/api/stripe/".concat(null==a?void 0:a.uuid,"/intent"),"POST",{enabled:!!(null==a?void 0:a.uuid),retry:2,retryDelay:2e3,mutationKey:[r.$k,null==a?void 0:a.uuid,i]});return(0,t.useEffect)(()=>{d&&e&&s({country:null!=n?n:null})},[s,d,e,n]),l},p={};function m(e){return f(e,(0,l._r)())}function f(e,n){let i="ie"===e?n.stripePublishableKeyIreland:"us_sandbox"===e&&n.stripePublishableKeySandbox?n.stripePublishableKeySandbox:n.stripePublishableKey;return p[i]||(p[i]=d(i)),p[i]}let g=e=>{if(v.includes(e))return e;let n=e.split("-")[0];return v.includes(n)?n:"en"}},0x1cef2276b:(e,n,i)=>{i.d(n,{b:()=>u});var a=i(0xc1dd9efc),t=i(0xfc89b4a4),r=i(0x14de19ae8);function u(e){let{account:n,activeOrganization:i}=(0,r.YL)();return(0,t.useMemo)(()=>(0,a.yI)(n,i,e),[n,i,e])}},0x22be9474c:(e,n,i)=>{i.d(n,{BH:()=>y,NE:()=>b,NL:()=>p,Nf:()=>Q,Nj:()=>o,QY:()=>f,U6:()=>d,VK:()=>S,a:()=>m,b3:()=>L,gn:()=>q,iD:()=>s,k3:()=>h,kP:()=>c,q:()=>v,rX:()=>_,tX:()=>g});var a=i(0x12c9046cd),t=i(0x14de19ae8),r=i(0x49fac030),u=i(0x17e725145),l=i(0x177b0d076);let o=e=>(0,a.Sk)("/api/organizations/".concat(e),{queryKey:[r.i5,e],enabled:!!e,staleTime:3e4}),s=()=>{let{activeOrganization:e}=(0,t.YL)(),n=null==e?void 0:e.uuid;return(0,a.Qv)(e=>{let{flagType:i}=e;return"/api/organizations/".concat(n,"/flags/").concat(i,"/dismiss")},"POST",(e,n)=>{let{flagType:i}=e;if(n)return{...n,active_flags:n.active_flags.filter(e=>e.type!==i)}},{queryKey:[r.i5,n]})},d=function(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:i}=(0,t.YL)(),u=null==i?void 0:i.uuid,l=(0,t.mV)();return(0,a.Sk)("/api/organizations/".concat(u,"/members_limit"),{queryKey:[r.hz,u],enabled:!!u&&l&&(null==(e=n.enabled)||e),staleTime:0})},c=()=>{var e;let{data:n}=d();return null!=(e=null==n?void 0:n.minimum_seats)?e:5},y=()=>{let{activeOrganization:e}=(0,t.YL)(),n=null==e?void 0:e.uuid,i=(0,u.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(n,"/contracted_quantity"),"PUT",{enabled:!!n,onSuccess:async()=>{await i.invalidateQueries({queryKey:[r.hz,n]})}})},v=()=>{let{activeOrganization:e}=(0,t.YL)(),n=null==e?void 0:e.uuid;return(0,a.Sk)("/api/organizations/".concat(n,"/public_projects_enabled"),{queryKey:[r._d,n],enabled:!!n,staleTime:0})},_=()=>{let{activeOrganization:e}=(0,t.YL)(),n=null==e?void 0:e.uuid;return(0,a.Sk)("/api/organizations/".concat(n,"/feature_settings"),{queryKey:[r.RR,n],enabled:!!n,staleTime:0})},p=e=>{let{data:n}=_();if(!(null==n?void 0:n.forced_settings))return{isOrgPolicyControlled:!1,policyValue:void 0};let i=n.forced_settings.find(n=>n.feature===e);return{isOrgPolicyControlled:!!i,policyValue:null==i?void 0:i.forced_state}},m=()=>{var e;let n=(0,t.mV)(),{data:i}=_();return!n||(i?!(null==(e=i.disabled_features)?void 0:e.includes("claude_code_web")):void 0)},f=()=>{var e,n;let{activeOrganization:i}=(0,t.YL)(),{data:a}=o(null==i?void 0:i.uuid);return null==(n=null==a||null==(e=a.settings)?void 0:e.claude_ai_completion_feedback_enabled)||n},g=()=>{var e,n;let{activeOrganization:i}=(0,t.YL)(),{data:a}=o(null==i?void 0:i.uuid);return null==(n=null==a||null==(e=a.settings)?void 0:e.claude_ai_integration_sharing_enabled)||n};function b(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:i}=(0,t.YL)(),l="/api/organizations/".concat(null!=(e=null==i?void 0:i.uuid)?e:""),o=(0,u.useQueryClient)();return(0,a.L2)(l,"PUT",{enabled:!!i,...n,async onSuccess(){for(var e,a=arguments.length,t=Array(a),u=0;u<a;u++)t[u]=arguments[u];await Promise.all([o.invalidateQueries({queryKey:[r.Rw]}),o.invalidateQueries({queryKey:[r.i5]}),o.invalidateQueries({queryKey:[r.RR,null==i?void 0:i.uuid]}),o.invalidateQueries({queryKey:[r.En,null==i?void 0:i.uuid]})]),await (null==(e=n.onSuccess)?void 0:e.call(n,...t))}})}let S=()=>{let{activeOrganization:e}=(0,t.YL)(),n=null==e?void 0:e.uuid;return(0,a.Sk)("/api/organizations/".concat(n,"/allowed_domains"),{queryKey:[r.OX,n],enabled:!!n})},h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,t.YL)(),i=null==n?void 0:n.uuid,l=(0,u.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(i,"/allowed_domains"),"PUT",{enabled:!!i,...e,onSuccess:async function(){for(var n,a=arguments.length,t=Array(a),u=0;u<a;u++)t[u]=arguments[u];await l.invalidateQueries({queryKey:[r.OX,i]}),await (null==(n=e.onSuccess)?void 0:n.call(e,...t))}})},L=()=>{let{activeOrganization:e}=(0,t.YL)(),n=null==e?void 0:e.uuid;return(0,a.L2)("/api/organizations/".concat(n,"/projects/request_haystack"),"POST",{enabled:!!n})},Q=()=>{let{activeOrganization:e}=(0,t.YL)(),n=(0,t.mV)(),i=null==e?void 0:e.uuid;return(0,a.Sk)("/api/organizations/".concat(i,"/is_pure_usage_based"),{queryKey:["is_pure_usage_based",i],enabled:!!i&&n,staleTime:3e4})},q=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,t.YL)(),i=null==n?void 0:n.uuid,o=(0,u.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(i,"/compliance_api_settings"),"POST",{enabled:!!i,...e,async onSuccess(n,a,t){var u;i&&o.setQueryData([r.Rw],e=>{var n;return n=a.enable_compliance_api,(null==e?void 0:e.account)?(0,l.jM)(e,e=>{if(!e.account)return;let a=e.account.memberships.find(e=>e.organization.uuid===i);if(!a)return;let t=a.organization.capabilities,r=t.indexOf("compliance_api");n&&-1===r?t.push("compliance_api"):n||-1===r||t.splice(r,1)}):e}),await (null==(u=e.onSuccess)?void 0:u.call(e,n,a,t))}})}},0x23e1b1f63:(e,n,i)=>{i.d(n,{$0:()=>C,A5:()=>w,C:()=>en,Cm:()=>ec,Dt:()=>eL,Ew:()=>z,Gs:()=>ei,If:()=>eb,Jh:()=>L,L3:()=>R,Le:()=>Q,N_:()=>ed,Nb:()=>K,PI:()=>eo,PQ:()=>q,Pz:()=>h,QO:()=>ey,Qn:()=>D,Si:()=>es,UK:()=>et,Uu:()=>H,V9:()=>F,VK:()=>Z,Xi:()=>G,Xt:()=>x,ZA:()=>X,_D:()=>er,a1:()=>V,aw:()=>eQ,bE:()=>$,bF:()=>N,bt:()=>M,c:()=>I,cR:()=>ea,cg:()=>O,e0:()=>E,fS:()=>el,h:()=>eh,i4:()=>j,ib:()=>em,jH:()=>ev,jN:()=>Y,k6:()=>T,kg:()=>ee,lG:()=>k,ls:()=>ef,mU:()=>eg,mv:()=>eS,nc:()=>P,p$:()=>ep,rB:()=>eu,sd:()=>J,uS:()=>W,wu:()=>B,xy:()=>e_,yS:()=>A});var a=i(0x12c9046cd),t=i(0xa5acf583),r=i(0x14de19ae8),u=i(0x139b5e710),l=i(0x1bdad8807),o=i(0x865ff458),s=i(0x1cef2276b),d=i(0x1016c6ed2),c=i(0x49fac030),y=i(0xc1dd9efc),v=i(0x78b33fbd),_=i(0x17e725145),p=i(0xfc89b4a4),m=i(0x4339cba),f=i(0xea143dbe),g=i(0x2771fcb3),b=i(0x22be9474c),S=i(0xc6857cab);function h(e){var n;let{onSuccess:i,onError:t}=e,{activeOrganization:u}=(0,r.YL)(),{data:l}=(0,o.hz)(),s=null!=(n=null==l?void 0:l.referralCode)?n:null,{data:d,variables:c,...y}=(0,a.L2)("/api/billing/".concat(null==u?void 0:u.uuid,"/consumer_pricing"),"POST",{enabled:!!u,meta:{noToast:!0},onError:t,onSuccess:i,transformVariables:e=>({...e,referralCode:null!=s?s:e.referralCode})}),[v,_]=(0,p.useState)(),[m,f]=(0,p.useState)();return(0,p.useEffect)(()=>{d&&(_(d),f(c))},[d,c]),{data:v,variables:m,...y}}function L(e){let{onError:n}=e,{activeOrganization:i}=(0,r.YL)(),{data:t,variables:u,...l}=(0,a.L2)("/api/billing/".concat(null==i?void 0:i.uuid,"/cw_pricing"),"POST",{enabled:!!i,meta:{noToast:!0},onError:n}),[o,s]=(0,p.useState)(),[d,c]=(0,p.useState)();return(0,p.useEffect)(()=>{t&&(s(t),c(u))},[t,u]),{data:o,variables:d,...l}}function Q(){var e,n,i,t;let{onSuccess:u,onError:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:o}=(0,r.YL)(),[s,d]=(0,p.useState)(null),[c,y]=(0,p.useState)(),{data:v,isPending:_,error:f,mutate:g}=(0,a.L2)("/api/billing/".concat(null==o?void 0:o.uuid,"/individual_plan_pricing/v2"),"POST",{enabled:!!o,meta:{noToast:!0},onError:l,onSuccess:u});(0,p.useEffect)(()=>{v&&y(v)},[v]);let b=c||v,S=b&&{country:b.country,currency:b.currency,price:null==(e=b.product_prices_per_billing_period)?void 0:e.max_5x_monthly,planType:m.un.FIVE_X},h=b&&{country:b.country,currency:b.currency,price:null==(n=b.product_prices_per_billing_period)?void 0:n.max_20x_monthly,planType:m.un.TWENTY_X},L=b&&{country:b.country,currency:b.currency,price:null==(i=b.product_prices_due_today)?void 0:i.max_5x_monthly,planType:m.un.FIVE_X};return{fiveXPricing:S,twentyXPricing:h,fiveXPricingProrated:L,twentyXPricingProrated:b&&{country:b.country,currency:b.currency,price:null==(t=b.product_prices_due_today)?void 0:t.max_20x_monthly,planType:m.un.TWENTY_X},isPending:_,error:f,fetchAllPricing:(0,p.useCallback)(e=>{d(e),e.noCache&&y(void 0),g(e)},[g]),addressParams:s}}let q=()=>{var e;let{activeOrganization:n}=(0,r.YL)(),{data:i}=(0,o.hz)(),t=null!=(e=null==i?void 0:i.referralCode)?e:null;return(0,a.L2)("/api/organizations/".concat(null==n?void 0:n.uuid,"/subscription"),"PUT",{enabled:!!n,transformVariables:e=>({...e,referralCode:null!=t?t:e.referralCode})})},K=()=>{var e;let{activeOrganization:n}=(0,r.YL)(),{data:i}=(0,o.hz)(),t=null!=(e=null==i?void 0:i.referralCode)?e:null;return(0,a.L2)("/api/organizations/".concat(null==n?void 0:n.uuid,"/subscription/verify-payment"),"POST",{enabled:!!n,transformVariables:e=>({...e,referralCode:null!=t?t:e.referralCode})})},T=()=>{let{activeOrganization:e}=(0,r.YL)();return(0,a.L2)("/api/organizations/".concat(null==e?void 0:e.uuid,"/mobile_overage_setup_intent"),"POST",{enabled:!!e})},x=()=>{let{activeOrganization:e}=(0,r.YL)();return(0,a.L2)("/api/organizations/".concat(null==e?void 0:e.uuid,"/subscription/cw"),"PUT",{enabled:!!e})},w="payment-method";function P(){let{activeOrganization:e}=(0,r.YL)(),n=(0,s.b)(y.Nt.BillingView);return S.env.NEXT_PUBLIC_DISABLE_PAYMENTS?{data:null,isLoading:!1,refetch:()=>Promise.resolve()}:(0,a.Sk)("/api/organizations/".concat(null==e?void 0:e.uuid,"/payment_method"),{enabled:!!e&&n,queryKey:[w,null==e?void 0:e.uuid],staleTime:9e5})}function Y(e){var n;let{activeOrganization:i}=(0,r.YL)(),t=(0,r.h0)();return(0,a.Sk)("/api/organizations/".concat(null==i?void 0:i.uuid,"/subscription_details"),{queryKey:[c.Gn,null==i?void 0:i.uuid],staleTime:0,initialData:null==e?void 0:e.initialData,refetchOnMount:null==e||!e.forceRefetch||"always",enabled:!!i&&t&&(null==(n=null==e?void 0:e.enabled)||n),meta:{noToast:e=>e instanceof d.LG&&404===e.statusCode}})}function C(e){var n;let{activeOrganization:i}=(0,r.YL)();return(0,a.Sk)("/api/organizations/".concat(null==i?void 0:i.uuid,"/paused_subscription_details"),{queryKey:[c.dZ,null==i?void 0:i.uuid],enabled:!!i&&(null==(n=null==e?void 0:e.enabled)||n),meta:{noToast:e=>e instanceof d.LG&&404===e.statusCode}})}function z(e){var n;let{activeOrganization:i}=(0,r.YL)();return(0,a.Sk)("/api/organizations/".concat(null==i?void 0:i.uuid,"/trial_status"),{queryKey:[c.nb,null==i?void 0:i.uuid],enabled:!!i&&(null==(n=null==e?void 0:e.enabled)||n),meta:{noToast:e=>e instanceof d.LG&&404===e.statusCode}})}function M(){let{activeOrganization:e}=(0,r.YL)(),n=(0,_.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(null==e?void 0:e.uuid,"/acknowledge_trial_end"),"POST",{enabled:!!e,meta:{noToast:!0},onSuccess:()=>{n.setQueryData([c.nb,null==e?void 0:e.uuid],e=>{if(e)return{...e,trial_end_requires_action:!1}})}})}let E=function(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{addError:a}=(0,u.Yf)(),t=(0,_.useQueryClient)(),r=(0,f.UV)(e,{...i,async onSuccess(u,l,o){var s;if("payment_intent_client_secret"in u){let e=await n;if(!e)return void a("Stripe failed to initialize. You can try again.");let i=await e.confirmPayment({clientSecret:u.payment_intent_client_secret,redirect:"if_required"});return i.error?void a("Payment confirmation failed. You can try again.",{error:i.error}):void r.mutate(l)}t.invalidateQueries({queryKey:[c.MJ,e]}),t.invalidateQueries({queryKey:[c._S,e]}),await (null==(s=i.onSuccess)?void 0:s.call(i,u,l,o))}});return r},k=function(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{addError:a}=(0,u.Yf)(),t=(0,_.useQueryClient)(),r=(0,f.tH)(e,{...i,async onSuccess(u,l,o){var s;if("payment_intent_client_secret"in u){let e=await n;if(!e)return void a("Stripe failed to initialize. You can try again.");let i=await e.confirmPayment({clientSecret:u.payment_intent_client_secret,redirect:"if_required"});return i.error?void a("Payment confirmation failed. You can try again.",{error:i.error}):void r.mutate(l)}t.invalidateQueries({queryKey:[c.MJ,e]}),t.invalidateQueries({queryKey:[c._S,e]}),await (null==(s=i.onSuccess)?void 0:s.call(i,u,l,o))}});return r};function U(){let{activeOrganization:e}=(0,r.YL)(),n=(0,r.mV)();return S.env.NEXT_PUBLIC_DISABLE_PAYMENTS?{data:{status:"active",cancel_at_ts:null},isLoading:!1}:(0,a.Sk)("/api/organizations/".concat(null==e?void 0:e.uuid,"/subscription_status"),{queryKey:[c._S,null==e?void 0:e.uuid],staleTime:0,enabled:!!e&&n,meta:{noToast:e=>e instanceof d.LG&&404===e.statusCode}})}function O(){let{data:e,isLoading:n}=U();return{isRavenTrialing:(null==e?void 0:e.status)==="trialing",isLoading:n}}function N(){let{data:e,isLoading:n}=U();return{isRavenCanceled:(null==e?void 0:e.status)==="canceled"||(null==e?void 0:e.status)==="unpaid",isLoading:n}}function D(){let{data:e,isLoading:n}=U();return{isRavenPastDue:(null==e?void 0:e.status)==="past_due",isLoading:n}}function I(){let{data:e,isLoading:n}=U();return{isRavenPendingCancellation:!!(null==e?void 0:e.cancel_at_ts),isLoading:n}}function A(){let{activeOrganization:e}=(0,r.YL)(),{isRavenCanceled:n,isLoading:i}=N(),{isRavenPastDue:a,isLoading:t}=D(),u=i||t,l=(null==e?void 0:e.billing_type)==="stripe_subscription_contracted";return{isLoading:u,canManageMembers:!u&&!n&&(l||!a)}}function G(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,r.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/end_subscription"),"PUT",{...e,onSuccess(n,a,r){var u;i.setQueryData([c.Gn,t],e=>{if(e)return{...e,plan_ending_before:"".concat(n.plan_ends_at,"T00:00:00+00:00")}}),i.invalidateQueries({queryKey:[c._S,t]}),i.invalidateQueries({queryKey:[c.MJ,t]}),i.invalidateQueries({queryKey:[c.dZ,t]}),i.invalidateQueries({queryKey:[c.Gn,t]}),null==(u=e.onSuccess)||u.call(e,n,a,r)},enabled:!!n})}function R(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,r.YL)(),i=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(i,"/cancellation_survey"),"POST",{...e,enabled:!!n})}function V(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,r.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/resume_subscription"),"PUT",{...e,onSuccess(n,a,r){var u;i.setQueryData([c.Gn,t],e=>{if(e)return{...e,plan_ending_before:null}}),i.invalidateQueries({queryKey:[c._S,t]}),i.invalidateQueries({queryKey:[c.MJ,t]}),null==(u=e.onSuccess)||u.call(e,n,a,r)},enabled:!!n})}function B(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,r.YL)(),i=(0,_.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(null==n?void 0:n.uuid,"/renew_subscription/cw"),"PUT",{...e,onSuccess(a,t,r){var u;a.clientSecret||(i.invalidateQueries({queryKey:[c.Gn,null==n?void 0:n.uuid]}),i.invalidateQueries({queryKey:[c._S,null==n?void 0:n.uuid]}),i.invalidateQueries({queryKey:[c.cc,null==n?void 0:n.uuid]}),i.invalidateQueries({queryKey:[c.MJ,null==n?void 0:n.uuid]})),null==(u=e.onSuccess)||u.call(e,a,t,r)},enabled:!!n})}function J(e){let{limit:n,organizationUuid:i,meta:t}=e,{activeOrganization:u}=(0,r.YL)(),l=i||(null==u?void 0:u.uuid);return(0,a.iC)("/api/stripe/".concat(l,"/invoices?limit=").concat(n),{pageParamName:"page",nextPageField:"next_page",initialPageParam:"",queryKey:[c.cc,l,{limit:n}],staleTime:0,enabled:!!l,meta:t})}function Z(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,r.YL)(),i=(0,r.mV)();return(0,a.Sk)("/api/stripe/".concat(null==n?void 0:n.uuid,"/upcoming_invoice"),{queryKey:[c.MJ,null==n?void 0:n.uuid],staleTime:0,enabled:!!n&&i,meta:{noToast:e=>e instanceof d.LG&&500===e.statusCode},...e})}function X(){let{activeOrganization:e}=(0,r.YL)(),n=(0,_.useQueryClient)(),i=null==e?void 0:e.uuid;return(0,a.L2)("/api/organizations/".concat(i,"/payment_method/update_latest"),"POST",{onSuccess:async e=>{let a=n.getQueryData([c.Gn,i]);a&&e?n.setQueryData([c.Gn,i],{...a,payment_method:{...e}}):await n.invalidateQueries({queryKey:[c.Gn,i]}),n.invalidateQueries({queryKey:[c._S,i]}),n.invalidateQueries({queryKey:[c.cc,i]})},meta:{noToast:!0}})}let F=150;function j(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],{client:n}=(0,v.useStatsigClient)(),{account:i}=(0,r.YL)(),a=(0,v.useDynamicConfig)("claude_teams_reduce_minimum_seat_count_cutoff_datetime");if(!e)return 5;let t=a.get("feature_launch_date","2099-12-31T00:00:00-08:00"),u=(null==i?void 0:i.created_at)?new Date(i.created_at):null,l=new Date(t);return u&&u>l?n.getExperiment("claude_teams_reduce_minimum_seat_count").get("minimum_seat_count",5):5}function H(){var e;let{data:n,isLoading:i}=(0,g.Nk)(),{data:a,isLoading:t}=(0,f.of)(),u=(0,s.b)(y.Nt.MembersManage),l=(0,s.b)(y.Nt.BillingView),{data:o}=(0,b.U6)(),{data:d}=Y({enabled:l}),c=(0,r.zm)(),v=ev(),_=i||t||!n||!a||!o,m=null!=(e=null==o?void 0:o.minimum_seats)?e:5,S=_?0:n.length,h=_?0:a.filter(e=>"pending"===e.status).length,L=S+h,Q=Math.max(S+h,m),q=_?0:c?o.members_limit-L:Math.max(m-L,0),K=(0,p.useMemo)(()=>_||!o?null:(null==d?void 0:d.seat_tier_quantities)||o.seat_tier_quantities,[_,o,d]),T=(0,p.useMemo)(()=>{if(_||!n||!a)return{};let e={};return n.forEach(n=>{let i=n.seat_tier;e[i]=(e[i]||0)+1}),a.forEach(n=>{if("pending"===n.status){let i=n.seat_tier;e[i]=(e[i]||0)+1}}),e},[_,n,a]),x=(0,p.useMemo)(()=>!_&&n&&a?Object.fromEntries((v||[]).map(e=>{var n;let i=null!=(n=null==K?void 0:K[e])?n:0,a=T[e]||0;return[e,i-a]})):Object.fromEntries((v||[]).map(e=>[e,0])),[_,n,a,v,K,T]);if(_)return{isLoading:_,hasManageMembersPermission:u,totalMembersWithoutMinimumApplied:0,totalMembersWithMinimumApplied:0,activeMembers:0,invitedMembers:0,unclaimedMembers:0,minimumApplied:!1,minimumSeatCount:5,memberLimit:0,isUnlimited:!1,unclaimedSeatsByTier:x,standardMembers:0,enterpriseLiteMembers:0,premiumMembers:0,usageBasedMembers:0,usageBasedChatMembers:0,unassignedMembers:0,totalAssignedMembers:0};let w=(T.team_standard||0)+(T.enterprise_standard||0),P=T.enterprise_lite||0,C=T.enterprise_nonprofit||0,z=(T.team_tier_1||0)+(T.enterprise_tier_1||0),M=T.enterprise_usage_based||0,E=T.enterprise_usage_based_chat||0,k=T.unassigned||0;return{isLoading:_,hasManageMembersPermission:u,totalMembersWithoutMinimumApplied:L,totalMembersWithMinimumApplied:Q,activeMembers:S,invitedMembers:h,unclaimedMembers:q,minimumApplied:L<m,minimumSeatCount:m,memberLimit:o.members_limit,isUnlimited:o.unlimited_members||!1,unclaimedSeatsByTier:x,standardMembers:w,enterpriseLiteMembers:P,premiumMembers:z,usageBasedMembers:M,usageBasedChatMembers:E,unassignedMembers:k,totalAssignedMembers:w+P+C+z+M+E}}function W(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:i}=(0,r.YL)(),t="/api/organizations/".concat(null!=(e=null==i?void 0:i.uuid)?e:"","/profile"),u=(0,_.useQueryClient)();return(0,a.L2)(t,"PUT",{...n,async onSuccess(){for(var e,i=arguments.length,a=Array(i),t=0;t<i;t++)a[t]=arguments[t];await u.invalidateQueries({queryKey:[c.Oi]}),await (null==(e=n.onSuccess)?void 0:e.call(n,...a))}})}let $=()=>{let{activeOrganization:e}=(0,r.YL)(),n=(0,s.b)(y.Nt.BillingView);return(0,a.Sk)("/api/organizations/".concat(null==e?void 0:e.uuid,"/subscription/scheduled_seat_tier_changes"),{enabled:!!e&&n,queryKey:[c.pT,null==e?void 0:e.uuid]})},ee=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,r.YL)(),i=(0,_.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(null==n?void 0:n.uuid,"/subscription/cancel_scheduled_seat_tier_changes"),"PUT",{...e,onSuccess:function(){for(var a,t=arguments.length,r=Array(t),u=0;u<t;u++)r[u]=arguments[u];i.invalidateQueries({queryKey:[c.pT,null==n?void 0:n.uuid]}),i.invalidateQueries({queryKey:[c.Gn,null==n?void 0:n.uuid]}),null==(a=e.onSuccess)||a.call(e,...r)}})};function en(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,r.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/pro/upgrade_to_yearly"),"PUT",{...e,onSuccess(n,a,r){var u;i.invalidateQueries({queryKey:[c.Gn,t]}),i.invalidateQueries({queryKey:[c.dZ,t]}),i.invalidateQueries({queryKey:[c._S,t]}),i.invalidateQueries({queryKey:[c.MJ,t]}),i.invalidateQueries({queryKey:[c.cc,t]}),null==(u=e.onSuccess)||u.call(e,n,a,r)},enabled:!!n})}function ei(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,r.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/team/upgrade_to_annual"),"PUT",{...e,onSuccess(n,a,r){var u;i.invalidateQueries({queryKey:[c.Gn,t]}),i.invalidateQueries({queryKey:[c.dZ,t]}),i.invalidateQueries({queryKey:[c._S,t]}),i.invalidateQueries({queryKey:[c.MJ,t]}),i.invalidateQueries({queryKey:[c.cc,t]}),null==(u=e.onSuccess)||u.call(e,n,a,r)},enabled:!!n})}function ea(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,r.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/pro/switch_billing_interval"),"PUT",{...e,onSuccess(n,a,r){var u;i.invalidateQueries({queryKey:[c.Gn,t]}),i.invalidateQueries({queryKey:[c.dZ,t]}),i.invalidateQueries({queryKey:[c._S,t]}),i.invalidateQueries({queryKey:[c.MJ,t]}),i.invalidateQueries({queryKey:[c.Oi,t]}),null==(u=e.onSuccess)||u.call(e,n,a,r)},enabled:!!n})}function et(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,r.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/upgrade_to_max"),"PUT",{...e,transformVariables:e=>({max_tier:e.maxTier,promo_code:e.promoCode}),onSuccess(n,a,r){var u;i.invalidateQueries({queryKey:[c.Gn,t]}),i.invalidateQueries({queryKey:[c.dZ,t]}),i.invalidateQueries({queryKey:[c._S,t]}),i.invalidateQueries({queryKey:[c.MJ,t]}),i.invalidateQueries({queryKey:[c.cc,t]}),null==(u=e.onSuccess)||u.call(e,n,a,r)},enabled:!!n})}function er(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,r.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/downgrade_individual_claude_subscription"),"PUT",{...e,onSuccess(n,a,r){var u;if(n.downgrade_timestamp){let e=new Date(1e3*n.downgrade_timestamp).toISOString();i.setQueryData([c.Gn,t],n=>{if(n)return{...n,scheduled_downgrade:{base_price_in_minor_units:0,billing_interval:a.target_plan_type.includes("annual")?"yearly":"monthly",currency:"USD",date:e,plan_type:a.target_plan_type},has_schedule:!0}})}i.invalidateQueries({queryKey:[c.Gn,t]}),i.invalidateQueries({queryKey:[c._S,t]}),i.invalidateQueries({queryKey:[c.dZ,t]}),null==(u=e.onSuccess)||u.call(e,n,a,r)},enabled:!!n})}function eu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,r.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/cancel_subscription_downgrade"),"PUT",{...e,onSuccess(n,a,r){var u;i.setQueryData([c.Gn,t],e=>{if(e)return{...e,scheduled_downgrade:void 0,has_schedule:!1}}),i.invalidateQueries({queryKey:[c.Gn,t]}),i.invalidateQueries({queryKey:[c._S,t]}),null==(u=e.onSuccess)||u.call(e,n,a,r)},enabled:!!n})}function el(e){let{activeOrganization:n}=(0,r.YL)();return(0,a.Sk)("/api/stripe/".concat(null==n?void 0:n.uuid,"/balance"),{queryKey:["stripe-balance",null==n?void 0:n.uuid],staleTime:18e5,enabled:!!n,...e})}function eo(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],{activeOrganization:n}=(0,r.YL)(),i=null==n?void 0:n.uuid;return(0,a.Sk)("/api/organizations/".concat(i,"/check_3ds_required"),{enabled:e&&!!n,queryKey:["check-3ds-required",i],meta:{noToast:!0},staleTime:864e5,refetchOnWindowFocus:!1,refetchOnMount:!1})}function es(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,r.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/verify_payment_method_3ds"),"POST",{...e,onSuccess(n,a,r){var u;i.invalidateQueries({queryKey:["check-3ds-required",t]}),i.invalidateQueries({queryKey:[c.Gn,t]}),null==(u=e.onSuccess)||u.call(e,n,a,r)},enabled:!!n})}function ed(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{activeOrganization:n}=(0,r.YL)(),i=null==n?void 0:n.uuid;return(0,a.Sk)("/api/organizations/".concat(i,"/retention_coupon_eligibility"),{enabled:e&&!!n,queryKey:["retention-coupon-eligibility",i],meta:{noToast:!0},staleTime:3e5,refetchOnWindowFocus:!1,refetchOnMount:!0})}function ec(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,r.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/redeem_retention_coupon"),"POST",{...e,onSuccess(n,a,r){var u;n.success&&(i.invalidateQueries({queryKey:[c.Gn,t]}),i.invalidateQueries({queryKey:[c.MJ,t]})),null==(u=e.onSuccess)||u.call(e,n,a,r)},enabled:!!n})}let ey=()=>{let{activeOrganization:e}=(0,r.YL)(),n=(0,s.b)(y.Nt.BillingManage);return(0,a.Sk)("/api/organizations/".concat(null==e?void 0:e.uuid,"/seat_tier_options"),{enabled:!!e&&n})},ev=()=>{let e=(0,s.b)(y.Nt.BillingManage),n=(0,s.b)(y.Nt.BillingView),{data:i}=(0,b.U6)(),{data:a}=Y({enabled:e&&n}),t=(null==i?void 0:i.seat_tier_quantities)||(null==a?void 0:a.seat_tier_quantities);if(!t)return[];let r=Object.keys(t);return r.includes("unassigned")?r:[...r,"unassigned"]},e_=()=>{let e=ev();return y.uK.some(n=>e.includes(n))};function ep(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,r.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/pause_subscription"),"PUT",{...e,onSuccess(n,a,r){var u;i.invalidateQueries({queryKey:[c.Gn,t]}),i.invalidateQueries({queryKey:[c._S,t]}),i.invalidateQueries({queryKey:[c.MJ,t]}),i.invalidateQueries({queryKey:[c.dZ,t]}),null==(u=e.onSuccess)||u.call(e,n,a,r)},enabled:!!n})}function em(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,r.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/unpause_subscription"),"PUT",{...e,onSuccess(n,a,r){var u;i.invalidateQueries({queryKey:[c.Gn,t]}),i.invalidateQueries({queryKey:[c._S,t]}),i.invalidateQueries({queryKey:[c.MJ,t]}),i.invalidateQueries({queryKey:[c.dZ,t]}),null==(u=e.onSuccess)||u.call(e,n,a,r)},enabled:!!n})}function ef(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,r.YL)(),i=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(i,"/subscription/preview_seat_purchase"),"POST",{...e,enabled:!!n})}let eg=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{addError:n}=(0,u.Yf)(),{activeOrganization:i}=(0,r.YL)(),o=(0,t._r)(),s=(0,_.useQueryClient)(),d=null==i?void 0:i.uuid;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,r.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/subscription/purchase_seats"),"POST",{...e,onSuccess(n,a,r){var u;i.invalidateQueries({queryKey:[c.Gn,t]}),i.invalidateQueries({queryKey:[c.MJ,t]}),i.invalidateQueries({queryKey:[c._S,t]}),null==(u=e.onSuccess)||u.call(e,n,a,r)},enabled:!!n})}({...e,async onSuccess(i,a,t){var r,u,y,v;if(i.client_secret){let r=await (0,l.nW)(i.entity,o);if(!r){n("Stripe failed to initialize. You can try again."),null==(y=e.onError)||y.call(e,Error("Stripe failed to initialize. You can try again."),a,t);return}let _=await r.confirmPayment({clientSecret:i.client_secret,redirect:"if_required"});if(_.error){n("Payment confirmation failed. You can try again.",{error:_.error}),null==(v=e.onError)||v.call(e,Error("Payment confirmation failed. You can try again."),a,t);return}s.invalidateQueries({queryKey:[c.Gn,d]}),s.invalidateQueries({queryKey:[c.MJ,d]}),s.invalidateQueries({queryKey:[c._S,d]}),await (null==(u=e.onSuccess)?void 0:u.call(e,i,a,t));return}s.invalidateQueries({queryKey:[c.Gn,d]}),s.invalidateQueries({queryKey:[c.MJ,d]}),s.invalidateQueries({queryKey:[c._S,d]}),await (null==(r=e.onSuccess)?void 0:r.call(e,i,a,t))}})},eb=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,r.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/address"),"PUT",{...e,onSuccess:(n,a,r)=>{var u;i.invalidateQueries({queryKey:["organization-addresses",t]}),null==(u=e.onSuccess)||u.call(e,n,a,r)},enabled:!!n})},eS=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,r.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/address"),"PUT",{...e,onSuccess:(n,a,r)=>{var u;i.invalidateQueries({queryKey:["organization-addresses",t]}),null==(u=e.onSuccess)||u.call(e,n,a,r)},enabled:!!n})};function eh(){let{activeOrganization:e}=(0,r.YL)();return(0,a.Sk)("/api/organizations/".concat(null==e?void 0:e.uuid,"/address"),{queryKey:["organization-addresses",null==e?void 0:e.uuid],enabled:!!(null==e?void 0:e.uuid)})}let eL=(e,n)=>{var i,a,t,r,u;let l=null!=(t=null==n?void 0:n.some(e=>"enterprise_usage_based"===e.seat_tier||"enterprise_usage_based_chat"===e.seat_tier))&&t,o=(null!=(r=null==e||null==(i=e.seat_tier_quantities)?void 0:i.enterprise_usage_based)?r:0)>0||(null!=(u=null==e||null==(a=e.seat_tier_quantities)?void 0:a.enterprise_usage_based_chat)?u:0)>0;return l||o};function eQ(){let{data:e}=Y({enabled:(0,s.b)(y.Nt.BillingView)}),{data:n=[]}=(0,g.Nk)();return eL(e,n)}}}]);